# ðŸ¨ Hospitality Booking Platform - Database Project

BazÄƒ de date Oracle pentru o platformÄƒ de rezervÄƒri Ã®n domeniul ospitalitÄƒÈ›ii (hoteluri, pensiuni, apartamente, moteluri, vile).

## ðŸ“‹ Cuprins
- [Descriere](#descriere)
- [Structura Bazei de Date](#structura-bazei-de-date)
- [Diagrama ER](#diagrama-er)
- [Instalare](#instalare)
- [Constrained È™i Reguli](#constrained-È™i-reguli)
- [Exemple de Utilizare](#exemple-de-utilizare)
- [Tehnologii Utilizate](#tehnologii-utilizate)

## ðŸ“– Descriere

Acest proiect implementeazÄƒ o bazÄƒ de date completÄƒ pentru gestionarea unei platforme de rezervÄƒri Ã®n domeniul ospitalitÄƒÈ›ii. Baza de date suportÄƒ:

- ðŸ‘¤ Gestionarea persoanelor (proprietari È™i clienÈ›i)
- ðŸ  Gestionarea cazÄƒrilor (hoteluri, pensiuni, apartamente, moteluri, vile)
- ðŸ“… Sistem de rezervÄƒri cu validare automatÄƒ a datelor
- â­ Sistem de recenzii pentru cazÄƒri

## ðŸ—‚ï¸ Structura Bazei de Date

### Tabele Principale

#### 1. **PERSOANE**
TabelÄƒ pÄƒrinte care conÈ›ine informaÈ›ii generale despre toate persoanele din sistem.
- `CNP` (PK) - Cod Numeric Personal (13 cifre)
- `adresa_email` (UK) - AdresÄƒ de email unicÄƒ
- `numar_telefon` (UK) - NumÄƒr de telefon unic (10 cifre)

#### 2. **PROPRIETARI**
Proprietari de cazÄƒri (moÈ™teneÈ™te din PERSOANE).
- `CNP` (PK, FK) - ReferinÈ›Äƒ cÄƒtre PERSOANE
- `nume_proprietar` (NN) - Nume complet (min. 8 caractere)

#### 3. **CLIENTI**
ClienÈ›i care fac rezervÄƒri (moÈ™teneÈ™te din PERSOANE).
- `CNP` (PK, FK) - ReferinÈ›Äƒ cÄƒtre PERSOANE
- `nume_client` (NN) - Nume complet (min. 8 caractere)

#### 4. **CAZARI**
ProprietÄƒÈ›i disponibile pentru rezervare.
- `id_cazare` (PK) - ID generat automat (â‰¥ 50)
- `CNP` (FK) - Proprietarul cazÄƒrii
- `nume_cazare` (NN) - Nume cazare (min. 5 caractere, fÄƒrÄƒ cifre)
- `pret24h` (NN) - PreÈ› pe 24h (â‰¥ 50 RON)
- `adresa` (NN) - AdresÄƒ completÄƒ (min. 10 caractere)
- `oras` (NN) - OraÈ™ (min. 4 caractere, fÄƒrÄƒ cifre)
- `tara` (NN) - ÈšarÄƒ (min. 2 caractere, fÄƒrÄƒ cifre)
- `tip_cazare` - Tipul cazÄƒrii: `apartament`, `hotel`, `motel`, `pensiune`, `vila`

#### 5. **REZERVARI**
RezervÄƒri efectuate de clienÈ›i.
- `id_rezervare` (PK) - ID generat automat (â‰¥ 2000)
- `CNP` (FK) - Clientul care face rezervarea
- `id_cazare` (FK) - Cazarea rezervatÄƒ
- `durata_zile` (NN) - NumÄƒr de zile (1-30)
- `data_inceput` (NN) - Data de Ã®nceput (trebuie > SYSDATE)

#### 6. **RECENZII**
Recenzii pentru rezervÄƒri completate.
- `id_rezervare` (PK, FK) - ReferinÈ›Äƒ cÄƒtre REZERVARI
- `continut` - Text recenzie (max. 2000 caractere, opÈ›ional)
- `stele` (NN) - Rating (1-5)

## ðŸ”— Diagrama ER

```
PERSOANE (pÄƒrinte)
    â”œâ”€â”€ PROPRIETARI
    â”‚       â””â”€â”€ CAZARI
    â”‚               â””â”€â”€ REZERVARI
    â”‚                       â””â”€â”€ RECENZII
    â””â”€â”€ CLIENTI
            â””â”€â”€ REZERVARI
```

![Diagrama ER](docs/diagrama_ER.png)

## âš™ï¸ Instalare

### Prerequizite
- Oracle Database 11g sau superior
- Oracle SQL Developer (recomandat)
- Privilegii de CREATE TABLE, SEQUENCE, TRIGGER

### PaÈ™i de Instalare

1. **CloneazÄƒ repository-ul:**
```bash
git clone https://github.com/PanainteOctavian/BD-P-project.git
cd BD-P-project
```

2. **CreeazÄƒ structura bazei de date:**
```sql
@database/schema/scriptddl.sql
```

3. **InsereazÄƒ date de test:**
```sql
@database/data/insert_data.sql
```

4. **[OpÈ›ional] TesteazÄƒ constraint-urile:**
```sql
@database/tests/test_constraints.sql
```

## ðŸ”’ Constrained È™i Reguli

### Primary Keys (PK)
- CNP pentru PERSOANE, PROPRIETARI, CLIENTI
- id_cazare pentru CAZARI
- id_rezervare pentru REZERVARI, RECENZII

### Foreign Keys (FK)
- PROPRIETARI.CNP â†’ PERSOANE.CNP
- CLIENTI.CNP â†’ PERSOANE.CNP
- CAZARI.CNP â†’ PROPRIETARI.CNP
- REZERVARI.CNP â†’ CLIENTI.CNP
- REZERVARI.id_cazare â†’ CAZARI.id_cazare
- RECENZII.id_rezervare â†’ REZERVARI.id_rezervare

### Unique Constraints (UK)
- PERSOANE: adresa_email, numar_telefon

### Check Constraints (CK)
- **CNP**: 13 cifre exacte
- **Email**: Format valid (regex)
- **Telefon**: 10 cifre exacte
- **Nume**: Min. 8 caractere, doar litere È™i spaÈ›ii/cratimÄƒ
- **PreÈ›**: â‰¥ 50 RON
- **OraÈ™/ÈšarÄƒ**: Doar litere, min. 4/2 caractere
- **Tip cazare**: Unul din: apartament, hotel, motel, pensiune, vila
- **DuratÄƒ**: ÃŽntre 1 È™i 30 zile
- **Stele**: ÃŽntre 1 È™i 5

### Triggers
1. **trg_rezervari_BRIU**: ValideazÄƒ cÄƒ data_inceput > SYSDATE
2. **cazari_id_cazare_trg**: Auto-increment pentru id_cazare (sequence)
3. **rezervari_id_rezervare_trg**: Auto-increment pentru id_rezervare (sequence)

### Sequences
- `cazari_id_cazare_seq`: START WITH 50
- `rezervari_id_rezervare_seq`: START WITH 2000

## ðŸ’¡ Exemple de Utilizare

### AdÄƒugare cazare nouÄƒ
```sql
INSERT INTO PERSOANE VALUES(1234567890123, 'john@example.com', '0712345678');
INSERT INTO PROPRIETARI VALUES(1234567890123, 'John Doe Senior');
INSERT INTO CAZARI(CNP, NUME_CAZARE, PRET24H, ADRESA, ORAS, TARA, TIP_CAZARE) 
VALUES(1234567890123, 'Hotel Central', 150, 'Str. Principala 100', 
       'Cluj-Napoca', 'Romania', 'hotel');
```

### Efectuare rezervare
```sql
INSERT INTO PERSOANE VALUES(2345678901234, 'jane@example.com', '0723456789');
INSERT INTO CLIENTI VALUES(2345678901234, 'Jane Smith Junior');
INSERT INTO REZERVARI(CNP, ID_CAZARE, DURATA_ZILE, DATA_INCEPUT) 
VALUES(2345678901234, 50, 5, '15-DEC-2026');
```

### InterogÄƒri utile

**Toate rezervÄƒrile unui client:**
```sql
SELECT c.NUME_CLIENT, caz.NUME_CAZARE, r.DATA_INCEPUT, r.DURATA_ZILE
FROM CLIENTI c
JOIN REZERVARI r ON c.CNP = r.CNP
JOIN CAZARI caz ON r.ID_CAZARE = caz.ID_CAZARE
WHERE c.CNP = '5040917134679';
```

**Recenziile unui client:**
```sql
SELECT c.NUME_CLIENT, caz.NUME_CAZARE, rec.STELE, rec.CONTINUT
FROM CLIENTI c
JOIN REZERVARI r ON c.CNP = r.CNP
JOIN CAZARI caz ON r.ID_CAZARE = caz.ID_CAZARE
JOIN RECENZII rec ON r.ID_REZERVARE = rec.ID_REZERVARE
WHERE c.CNP = '5040917134679';
```

**CazÄƒri dupÄƒ tip È™i preÈ›:**
```sql
SELECT NUME_CAZARE, ORAS, PRET24H, TIP_CAZARE
FROM CAZARI
WHERE TIP_CAZARE = 'hotel' AND PRET24H < 200
ORDER BY PRET24H;
```

## ðŸ› ï¸ Tehnologii Utilizate

- **Oracle Database 11g** - Sistem de gestiune a bazelor de date
- **Oracle SQL Developer Data Modeler 24.3** - Design È™i modelare
- **PL/SQL** - Triggers È™i proceduri stocate
- **Oracle Sequences** - Auto-increment pentru ID-uri

## ðŸ“ Testare

Proiectul include teste comprehensive pentru toate constraint-urile:

- âœ… Testare Primary Keys (unicitate)
- âœ… Testare Foreign Keys (integritate referenÈ›ialÄƒ)
- âœ… Testare Check Constraints (validÄƒri de format È™i valori)
- âœ… Testare Unique Constraints
- âœ… Testare Not Null Constraints
- âœ… Testare Triggers (validare date)

Vezi fiÈ™ierul `database/tests/test_constraints.sql` pentru detalii complete.

## ðŸ“Š Statistici Proiect

- **6** tabele
- **29** constraint-uri (ALTER TABLE)
- **3** trigger-uri
- **2** secvenÈ›e
- **7** Foreign Keys
- **3** Unique Constraints
- **20+** Check Constraints

## ðŸ‘¤ Autor

**Panainte Silviu-Octavian**
- GitHub: [@PanainteOctavian](https://github.com/PanainteOctavian)

## ðŸ“„ LicenÈ›Äƒ

Acest proiect este dezvoltat Ã®n scop educaÈ›ional pentru cursul de Baze de Date.

---

**NotÄƒ**: Acest proiect a fost generat folosind Oracle SQL Developer Data Modeler 24.3.1.351.0831 pentru Oracle Database 11g.
